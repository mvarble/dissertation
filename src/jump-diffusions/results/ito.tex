\begin{lemma}
  \label{lemma:ito}
  Let $\X$ be a jump-diffusion with differential $\trunc$-characteristics $(\affDrift^\trunc, \affDiff, \affJump)$ and $f \in \ccpathSpace{2}{\vecSpace}{\bbR}$.
  The composition $f(\X)$ has the following semimartingale representation.
  \begin{equation*}
    f(\X_t)
    = \begin{aligned}[t]
      &f(\X_0) + \Big( \Der f(\X) \cdot \affDrift^\trunc(\X) \Big) \shortInt \leb_t + \frac12 \tr\Big( \Hess f(\X) \circ \affDiff(\X) \Big)  \shortInt \leb_t + \Der f(\X_-) \shortInt \X^\rmc \\
      &+ \Big( \Der f(\X_-) \cdot \trunc \Big) \ast \compensate{\jumpMeas^\X}_t + \Big( f(\X_-+\id_\vecSpace) - f(\X_-) - \Der f(\X_-) \cdot \trunc \Big) \ast \jumpMeas^\X_t
    \end{aligned}
  \end{equation*}
\end{lemma}
\begin{proof}
  \label{proof:lemma:ito}
  Apply It\^o's formula \cite[Theorem I.4.57]{jacod2003} and use the predictable covariation identity in (\ref{eq:jump-diffusion-canonical}) to get the following.
  \begin{align*}
    f(\X_t) 
    &= \begin{aligned}[t]
      &f(\X_0) + \sum_{i=1}^d \Der_i f(\X_-) \shortInt \X^i_t + \frac12\sum_{i,j=1}^d \Der_{ij} f(\X_-) \shortInt \prj{\X^{\rmc,i}}{\X^{\rmc,j}}_t \\
      &+ \sum_{0<s\leq t} \Big( f(\X_s) - f(\X_{s-}) - \sum_{i=1}^d \Der f_i(\X_{s-}) \Delta\X_s \Big)
    \end{aligned} \\
    &= \begin{aligned}[t]
      &f(\X_0) + \Der f(\X_-) \shortInt \X_t + \frac12\sum_{i,j=1}^d \Der_{ij} f(\X_-) \shortInt \big(\affDiff_{ij}(\X) \shortInt \leb\big)_t \\
      &+ \Big( f(\X_-+\id_\vecSpace) - f(\X_-) - \Der f(\X_-) \cdot \id_\vecSpace \Big) \ast \jumpMeas^\X_t
    \end{aligned}
  \end{align*}
  Using the iterated stochastic integral formula \cite[Remark I.4.37]{jacod2003}, we may simplify the above equation to the following.
  \begin{equation*}
    f(\X_t) = \begin{aligned}[t]
      &f(\X_0) + \Der f(\X_-) \shortInt \X_t + \frac12 \tr \Big( \Der_{ij} f(\X_-) \circ \affDiff(\X) \Big) \shortInt \leb_t \\
      &+ \Big( f(\X_-+\id_\vecSpace) - f(\X_-) - \Der f(\X_-) \cdot \id_\vecSpace \Big) \ast \jumpMeas^\X_t
    \end{aligned}
  \end{equation*}
  Now substitute our representation of (\ref{eq:jump-diffusion-canonical}) and repeat the iterated stochastic integral to get the following.
  \begin{align*}
    f(\X_t)
    &= \begin{aligned}[t]
      &f(\X_0) + \Der f(\X_-) \shortInt \big( \X_0 + \affDrift^\trunc(\X) \shortInt \leb + \X^\rmc + \trunc \ast \compensate{\jumpMeas^\X} + (\id_\vecSpace-\trunc) \ast \jumpMeas^\X \big)_t \\
      &+ \frac12 \tr\Big( \Hess f(\X_-) \circ \affDiff(\X) \Big)  \shortInt \leb_t  + \Big( f(\X_-+\id_\vecSpace) - f(\X_-) - \Der f(\X_-) \cdot \id_\vecSpace \Big) \ast \jumpMeas^\X_t
    \end{aligned} \\[1em]
    &= \begin{aligned}[t]
      &f(\X_0) + \Big( \Der f(\X_-) \cdot \affDrift^\trunc(\X) \Big) \shortInt \leb_t + \frac12 \tr\Big( \Hess f(\X_-) \circ \affDiff(\X) \Big)  \shortInt \leb_t + \Der f(\X_-) \shortInt \X^\rmc \\
      &+ \Der f(\X_-) \shortInt \big( \trunc \ast \compensate{\jumpMeas^\X} \big)_t + \Big( f(\X_-+\id_\vecSpace) - f(\X_-) - \Der f(\X_-) \cdot \trunc \Big) \ast \jumpMeas^\X_t
    \end{aligned}
  \end{align*}
  Furthermore, since $\X_- = \X$ on all but a countable amount of jumps, we may rewrite the Lebesgue integrals.
  \begin{equation}
    \label{eq:ito-pause}
    f(\X_t)
    = \begin{aligned}[t]
      &f(\X_0) + \Big( \Der f(\X) \cdot \affDrift^\trunc(\X) \Big) \shortInt \leb_t + \frac12 \tr\Big( \Hess f(\X) \circ \affDiff(\X) \Big)  \shortInt \leb_t + \Der f(\X_-) \shortInt \X^\rmc \\
      &+ \Der f(\X_-) \shortInt \big( \trunc \ast \compensate{\jumpMeas^\X} \big)_t + \Big( f(\X_-+\id_\vecSpace) - f(\X_-) - \Der f(\X_-) \cdot \trunc \Big) \ast \jumpMeas^\X_t
    \end{aligned}
  \end{equation}
  For the remaining equality, we construct localizing sequence $(T_n)_{n\in\bbN}$ of $\scrF$ stopping times,
  \begin{equation}
    \label{eq:stopping-times}
    T_n(\omega) \defeq \inf \big\{ t > 0 : \X_t(\omega) > n \big\} \wedge n, \quad \omega \in \Omega, ~ n \in \bbN,
  \end{equation}
  to see that $\Der f(\X_-)$ is $(\Prb, \scrF)$ locally bounded.
  \begin{equation*}
    \big|\Der f(\X^{T_n}_{s-})\big| \leq \sup_{|\stateVar| \leq n} \big| \Der f(\stateVar) \big|
  \end{equation*}
  Thus, by \cite[Proposition II.1.30]{jacod2003}, we may rewrite the following.
  \begin{equation*}
    \Der f(\X_-) \shortInt \big( \trunc \ast \compensate{\jumpMeas^\X} \big)_t 
    = \big( \Der f(\X_-) \cdot \trunc \big) \ast \compensate{\jumpMeas^\X}_t ,
  \end{equation*}
  which when substituted into (\ref{eq:ito-pause}) gives us our desired identity.
\end{proof}

